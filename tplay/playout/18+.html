<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>T Play (18+ Secure)</title>
    <link rel="icon" href="https://i.postimg.cc/RCnCv14W/T-Play.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #e50914;
            --primary-gradient: linear-gradient(135deg, #e50914 0%, #b80710 100%);
            --dark-bg: #0f0f13;
            --light-bg: #1a1a23;
            --card-bg: #1e1e29;
            --text-color: #ffffff;
            --text-secondary: #a0a0b0;
            --transition: all 0.3s ease;
        }
        *{margin:0;padding:0;box-sizing:border-box;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
        body{background-color:var(--dark-bg);color:var(--text-color);line-height:1.6;overflow-x:hidden;}
        .header{background:var(--light-bg);padding:12px 25px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;box-shadow:0 4px 12px rgba(0,0,0,0.15);gap:15px;min-height:60px;}
        .logo-container{display:flex;align-items:center;gap:20px;flex-shrink:0;}
        .logo{width:40px;height:40px;border-radius:8px;}
        .search-container{position:relative;flex:1;min-width:0;max-width:300px;}
        .search-input{width:100%;padding:8px 15px 8px 40px;border-radius:30px;border:none;background:var(--card-bg);color:var(--text-color);font-size:14px;height:36px;}
        .search-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:var(--text-secondary);}
        .main-content{padding:10px;max-width:1200px;margin:0 auto;}
        .channel-count{font-size:12px;color:var(--text-secondary);margin:8px 0 12px;}
        .channel-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;}
        .channel-item{background:var(--card-bg);border-radius:10px;overflow:hidden;cursor:pointer;transition:var(--transition);border:2px solid transparent;}
        .channel-item:hover,.channel-item.selected{transform:translateY(-3px);border-color:var(--primary-color);box-shadow:0 5px 15px rgba(0,0,0,0.3);}
        .channel-img{width:100%;height:80px;overflow:hidden;position:relative;}
        .channel-img img{width:100%;height:100%;object-fit:cover;transition:var(--transition);}
        .channel-item:hover .channel-img img,.channel-item.selected .channel-img img{transform:scale(1.05);}
        .source-badge{position:absolute;top:5px;right:5px;background:var(--primary-color);color:white;font-size:8px;padding:3px 8px;border-radius:30px;font-weight:bold;display:flex;align-items:center;gap:3px;}
        .channel-info{padding:8px;}
        .channel-name{font-weight:600;font-size:13px;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:95%;}
        .channel-category{color:var(--text-secondary);font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
        .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px;backdrop-filter:blur(5px);}
        .overlay-content{background:var(--light-bg);padding:25px;border-radius:16px;max-width:500px;width:100%;box-shadow:0 20px 40px rgba(0,0,0,0.4);position:relative;}
        .overlay-header{display:flex;align-items:center;margin-bottom:20px;gap:15px;}
        .overlay-logo{width:50px;height:50px;border-radius:10px;}
        .overlay-title{font-size:16px;font-weight:600;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
        .overlay-subtitle{color:var(--text-secondary);margin-bottom:20px;font-size:14px;}
        .sources-container{display:flex;flex-direction:column;gap:12px;margin-bottom:25px;max-height:300px;overflow-y:auto;padding-right:5px;}
        .source-btn{display:flex;align-items:center;justify-content:space-between;padding:15px;background:var(--card-bg);border-radius:10px;text-decoration:none;color:var(--text-color);transition:var(--transition);border:2px solid transparent;}
        .source-btn:hover,.source-btn:focus{border-color:var(--primary-color);background:rgba(229,9,20,0.06);transform:translateX(5px);outline:none;}
        .source-name{font-weight:600;font-size:14px;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px;}
        .source-action{color:var(--primary-color);font-size:14px;display:flex;align-items:center;gap:5px;flex-shrink:0;}
        .close-btn{background:var(--primary-gradient);color:white;border:none;padding:12px 25px;border-radius:30px;cursor:pointer;font-weight:600;font-size:16px;display:block;margin:0 auto;transition:var(--transition);}
        .close-btn:hover,.close-btn:focus{transform:scale(1.05);box-shadow:0 5px 15px rgba(229,9,20,0.3);outline:none;}
        .remote-info{position:fixed;bottom:20px;right:20px;background:var(--light-bg);padding:10px 15px;border-radius:8px;font-size:10px;box-shadow:0 4px 12px rgba(0,0,0,0.2);display:none;z-index:100;}
        .focus-indicator{position:absolute;border:2px solid var(--primary-color);border-radius:4px;pointer-events:none;z-index:101;transition:all 0.2s ease;display:none;}
        /* --- Auth modal styles --- */
        .auth-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.88);display:flex;align-items:center;justify-content:center;z-index:2000;padding:16px;}
        .auth-card{background:var(--light-bg);padding:22px;border-radius:12px;max-width:420px;width:100%;box-shadow:0 14px 36px rgba(0,0,0,0.6);}
        .auth-card h2{margin-bottom:8px;}
        .auth-card p{color:var(--text-secondary);margin-bottom:12px;font-size:13px;}
        .form-row{margin-bottom:12px;}
        .form-row input{width:100%;padding:10px;border-radius:8px;border:none;background:var(--card-bg);color:var(--text-color);font-size:14px;}
        .btn{display:inline-block;padding:10px 14px;border-radius:8px;border:none;background:var(--primary-gradient);color:#fff;font-weight:600;cursor:pointer;}
        .link-btn{background:none;border:none;color:var(--primary-color);cursor:pointer;text-decoration:underline;padding:0;font-size:13px;}
        .muted{color:var(--text-secondary);font-size:13px;}
        .small{font-size:12px;color:var(--text-secondary);}
        @media (max-width:768px){.logo{width:36px;height:36px}.channel-list{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}.channel-img{height:80px}}
    </style>
</head>
<body>
    <!-- Sidebar (kept minimal) -->
    <div class="header">
        <div class="logo-container">
            <img src="https://i.postimg.cc/RCnCv14W/T-Play.png" alt="T Play Logo" class="logo">
        </div>
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Search channels..." id="channelSearch">
        </div>
    </div>

    <div class="main-content">
        <div class="channel-count" id="channelCount">0 channels available</div>
        <div class="channel-list" id="channelList"></div>
    </div>

    <!-- Channel overlay -->
    <div class="overlay" id="overlay" aria-hidden="true">
        <div class="overlay-content" role="dialog" aria-modal="true">
            <div class="overlay-header">
                <img src="" alt="Channel Logo" class="overlay-logo" id="overlayLogo">
                <h2 class="overlay-title" id="overlayTitle"></h2>
            </div>
            <p class="overlay-subtitle" id="overlaySubtitle"></p>
            <div class="sources-container" id="overlaySources"></div>
            <button class="close-btn" id="closeOverlayBtn">Close</button>
        </div>
    </div>

    <!-- Focus indicator -->
    <div class="focus-indicator" id="focusIndicator"></div>

    <!-- Authentication overlay (blocks whole site until login) -->
    <div class="auth-overlay" id="authOverlay" style="display:none;">
        <div class="auth-card" id="authCard">
            <!-- Dynamic content injected by JS -->
        </div>
    </div>

    <script>
    /* ===============================
       Channels data (unchanged)
       =============================== */
    const channels = [
        { 
            name: "T Play Special", 
            sources: [
                { name: "Server 1", url: "go:S021" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Babes TV", 
            sources: [
                { name: "Server 1", url: "go:S10061" }
            ], 
            img: "https://adult-tv-channels.com/wp-content/uploads/2021/09/babes-tv-logo.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Brazzers TV Europe", 
            sources: [
                { name: "Server 1", url: "go:S10062" }
            ], 
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRuJzEDpagmegznN5Kpv2igBEgiJCrEndwqqOaixdhgggPoR4NRSs60rL30zRcjYAvepA&usqp=CAU", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Dorcel HD", 
            sources: [
                { name: "Server 1", url: "go:S10063" }
            ], 
            img: "https://resize.avn.com/eyJidWNrZXQiOiJhdm4taW1hZ2VzIiwia2V5IjoiMjAyMVwvMTJcLzAzXC9xNFlMTFplSHU3Q0NVakJMUWttRk5wMWgwMFJ0aW1VcmFoU29VNmJCLnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MTYwMCwiaGVpZ2h0Ijo5NjAsImZpdCI6Imluc2lkZSIsInBvc2l0aW9uIjoidG9wIn19fQ==", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Erox HD", 
            sources: [
                { name: "Server 1", url: "go:S10064" }
            ], 
            img: "https://adult-tv-channels.com/wp-content/uploads/2021/09/Erox-tv.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Eroxxx HD", 
            sources: [
                { name: "Server 1", url: "go:S10065" }
            ], 
            img: "https://adult-tv-channels.com/wp-content/uploads/2021/09/eroxxx-hd-logo.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Digital Desire HD", 
            sources: [
                { name: "Server 1", url: "go:S10066" }
            ], 
            img: "https://www.lyngsat.com/logo/tv/tt/tring_desire.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Extasy TV", 
            sources: [
                { name: "Server 1", url: "go:S10067" }
            ], 
            img: "https://adult-tv-channels.com/wp-content/uploads/2021/09/extasy-tv-logo.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Leo TV", 
            sources: [
                { name: "Server 1", url: "go:S10068" }
            ], 
            img: "data:image/png;base64,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", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Leo TV Gold", 
            sources: [
                { name: "Server 1", url: "go:S10069" }
            ], 
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_UkNUyznDixFZmezLBjB4u2yLk4dljsqz-g&s", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Reality Kings", 
            sources: [
                { name: "Server 1", url: "go:S10070" }
            ], 
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRLBYkfEzzzBpWo_ATp1Z5mbYUcA4pkh5qcSEI_pYa6sZy09cS5c2lXbuTic55EAJvKGBw&usqp=CAU", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Dusk! TV", 
            sources: [
                { name: "Server 1", url: "go:S10071" }
            ], 
            img: "https://cdn.broadbandtvnews.com/wp-content/uploads/2017/10/14114634/Dusk_logo.png", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Porn Classic", 
            sources: [
                { name: "Server 1", url: "go:S10072" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Private", 
            sources: [
                { name: "Server 1", url: "go:S10073" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Porn Video"
        },
        { 
            name: "Clips 1", 
            sources: [
                { name: "Server 1", url: "go:S10051" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Ushba Clips"
        },
        { 
            name: "Clips 2", 
            sources: [
                { name: "Server 1", url: "go:S10054" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Kaloopy Clips"
        },
        { 
            name: "Clips 3", 
            sources: [
                { name: "Server 1", url: "go:S10055" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Afreeca TV Clips"
        },
        { 
            name: "Clips 4", 
            sources: [
                { name: "Server 1", url: "go:S10055" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Mixed Clips"
        },
        { 
            name: "Fashion 1", 
            sources: [
                { name: "Server 1", url: "go:S10057" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Video Clips"
        },
        { 
            name: "Fashion 2", 
            sources: [
                { name: "Server 1", url: "go:S10051" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Video Clips"
        },
        { 
            name: "Tik Tok", 
            sources: [
                { name: "Server 1", url: "go:S10056" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Video Clips"
        },
        { 
            name: "AI Generated", 
            sources: [
                { name: "Server 1", url: "go:S10052" }
            ], 
            img: "https://i.postimg.cc/Jzqh6SSX/tplay.jpg", 
            category: "18+",
            description: "Images"
        }
        // ... add other channels as needed
    ];

    /* ===============================
       Helper: SHA-256 hash (returns hex)
       =============================== */
    async function sha256Hex(message) {
        const enc = new TextEncoder();
        const data = enc.encode(message);
        const hashBuffer = await crypto.subtle.digest('SHA-256', data);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        return hashArray.map(b => b.toString(16).padStart(2,'0')).join('');
    }

    /* ===============================
       Simple client-side auth using localStorage
       Keys used:
         - tp_play_pwd_hash  (hashed password)
         - tp_play_recovery_hash (hashed recovery code)
       =============================== */
    const AUTH_PWD_KEY = 'tp_play_pwd_hash';
    const AUTH_REC_KEY = 'tp_play_recovery_hash';
    let authPassed = false;

    const authOverlay = document.getElementById('authOverlay');
    const authCard = document.getElementById('authCard');

    // Build set-password UI (for first-time setup)
    function buildSetPasswordUI() {
        authCard.innerHTML = `
            <h2>Set access password</h2>
            <p class="muted">This app is restricted (18+). Create a password and a recovery code to protect access.</p>

            <div class="form-row">
                <input id="newPwd" type="password" placeholder="New password (required)" />
            </div>
            <div class="form-row">
                <input id="confirmPwd" type="password" placeholder="Confirm password (required)" />
            </div>
            <div class="form-row">
                <input id="recoveryCode" type="text" placeholder="Recovery code (used to reset password)" />
                <div class="small">Write this recovery code down — it's required to reset password if you forget it.</div>
            </div>
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:6px;">
                <button class="btn" id="setPwdBtn">Set Password</button>
            </div>
        `;

        document.getElementById('setPwdBtn').addEventListener('click', async () => {
            const p1 = document.getElementById('newPwd').value.trim();
            const p2 = document.getElementById('confirmPwd').value.trim();
            const rec = document.getElementById('recoveryCode').value.trim();

            if (!p1 || !p2) { alert('Please enter and confirm a password.'); return; }
            if (p1 !== p2) { alert('Passwords do not match.'); return; }
            if (!rec) { alert('Please enter a recovery code.'); return; }

            const pwdHash = await sha256Hex(p1);
            const recHash = await sha256Hex(rec);

            localStorage.setItem(AUTH_PWD_KEY, pwdHash);
            localStorage.setItem(AUTH_REC_KEY, recHash);

            // done — allow access
            hideAuthOverlay();
            initChannelList(); // now populate channels
        });
    }

    // Build login UI
    function buildLoginUI() {
        authCard.innerHTML = `
            <h2>Enter password to continue</h2>
            <p class="muted">This content is restricted. Enter the password you set to access the channels.</p>
            <div class="form-row">
                <input id="loginPwd" type="password" placeholder="Password" />
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;">
                <button class="btn" id="loginBtn">Login</button>
                <div>
                    <button class="link-btn" id="forgotBtn">Forgot password?</button>
                </div>
            </div>
            <div style="margin-top:8px;" class="small">If you forgot your password use the recovery code to reset.</div>
        `;

        document.getElementById('loginBtn').addEventListener('click', async () => {
            const inputPwd = document.getElementById('loginPwd').value;
            const stored = localStorage.getItem(AUTH_PWD_KEY);
            if (!stored) { alert('No password is set.'); return; }
            const inputHash = await sha256Hex(inputPwd || '');
            if (inputHash === stored) {
                hideAuthOverlay();
                initChannelList();
            } else {
                alert('Incorrect password.');
            }
        });

        document.getElementById('forgotBtn').addEventListener('click', buildForgotUI);
    }

    // Build forgot/reset UI
    function buildForgotUI() {
        authCard.innerHTML = `
            <h2>Reset password</h2>
            <p class="muted">Enter the recovery code you saved when setting the password.</p>
            <div class="form-row"><input id="enterRecovery" type="text" placeholder="Recovery code" /></div>
            <div style="display:flex;gap:8px;justify-content:flex-end;">
                <button class="btn" id="verifyRecoveryBtn">Verify & Reset</button>
            </div>
        `;

        document.getElementById('verifyRecoveryBtn').addEventListener('click', async () => {
            const provided = document.getElementById('enterRecovery').value.trim();
            const storedRec = localStorage.getItem(AUTH_REC_KEY);
            if (!storedRec) { alert('No recovery code set.'); return; }
            const providedHash = await sha256Hex(provided || '');
            if (providedHash === storedRec) {
                // allow reset: ask for new password
                buildForceResetUI();
            } else {
                alert('Recovery code does not match.');
            }
        });
    }

    function buildForceResetUI() {
        authCard.innerHTML = `
            <h2>Set new password</h2>
            <p class="muted">Enter a new password. You may also set a new recovery code.</p>
            <div class="form-row"><input id="resetPwd1" type="password" placeholder="New password" /></div>
            <div class="form-row"><input id="resetPwd2" type="password" placeholder="Confirm new password" /></div>
            <div class="form-row"><input id="resetRec" type="text" placeholder="New recovery code (optional)" /></div>
            <div style="display:flex;gap:8px;justify-content:flex-end;">
                <button class="btn" id="saveResetBtn">Save</button>
            </div>
        `;
        document.getElementById('saveResetBtn').addEventListener('click', async () => {
            const a = document.getElementById('resetPwd1').value.trim();
            const b = document.getElementById('resetPwd2').value.trim();
            const newRec = document.getElementById('resetRec').value.trim();

            if (!a || !b) { alert('Enter and confirm new password.'); return; }
            if (a !== b) { alert('Passwords do not match.'); return; }

            const pwdHash = await sha256Hex(a);
            localStorage.setItem(AUTH_PWD_KEY, pwdHash);
            if (newRec) {
                const recHash = await sha256Hex(newRec);
                localStorage.setItem(AUTH_REC_KEY, recHash);
            }
            alert('Password updated. You can now login.');
            buildLoginUI();
        });
    }

    function showAuthOverlayInitial() {
        authOverlay.style.display = 'flex';
        const pwdExists = !!localStorage.getItem(AUTH_PWD_KEY);
        if (!pwdExists) {
            buildSetPasswordUI();
        } else {
            buildLoginUI();
        }
    }
    function hideAuthOverlay() {
        authOverlay.style.display = 'none';
        authPassed = true;
    }

    /* ===============================
       Channel rendering + interaction
       (No category UI; only channel cards)
       =============================== */
    let currentFocusIndex = -1;
    let focusableElements = [];
    const focusIndicator = document.getElementById('focusIndicator');

    function initChannelList() {
        // Only render when auth is passed
        if (!authPassed && localStorage.getItem(AUTH_PWD_KEY)) {
            // if not authenticated yet, show auth overlay
            showAuthOverlayInitial();
            return;
        }

        const channelList = document.getElementById('channelList');
        const channelSearch = document.getElementById('channelSearch');
        const channelCount = document.getElementById('channelCount');

        // Render all channels initially
        renderChannels(channels);

        // Search functionality
        channelSearch.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const filteredChannels = channels.filter(channel =>
                channel.name.toLowerCase().includes(searchTerm) ||
                (channel.description || '').toLowerCase().includes(searchTerm)
            );
            renderChannels(filteredChannels);
            initKeyboardNavigation();
        });

        initKeyboardNavigation();
        document.addEventListener('keydown', handleKeyNavigation);
    }

    function renderChannels(channelsToRender) {
        const channelList = document.getElementById('channelList');
        const channelCount = document.getElementById('channelCount');

        channelList.innerHTML = '';
        channelCount.textContent = `${channelsToRender.length} channels available`;

        channelsToRender.forEach(channel => {
            const channelItem = document.createElement('div');
            channelItem.className = 'channel-item';
            channelItem.tabIndex = 0;

            const sourceCount = channel.sources.length;
            const sourceText = sourceCount === 1 ? '1 Source' : `${sourceCount} Sources`;

            channelItem.innerHTML = `
                <div class="channel-img">
                    <img src="${channel.img}" alt="${channel.name}" loading="lazy">
                    <div class="source-badge">
                        <i class="fas fa-satellite-dish"></i> ${sourceCount}
                    </div>
                </div>
                <div class="channel-info">
                    <div class="channel-name">${channel.name}</div>
                    <div class="channel-category">${channel.description || ''}</div>
                </div>
            `;

            channelItem.addEventListener('click', () => {
                showOverlay(channel);
            });

            channelList.appendChild(channelItem);
        });

        // after rendering update focusable
        initKeyboardNavigation();
    }

    function showOverlay(channel) {
        const overlay = document.getElementById('overlay');
        const overlayLogo = document.getElementById('overlayLogo');
        const overlayTitle = document.getElementById('overlayTitle');
        const overlaySubtitle = document.getElementById('overlaySubtitle');
        const overlaySources = document.getElementById('overlaySources');

        overlayLogo.src = channel.img;
        overlayTitle.textContent = channel.name;
        overlaySubtitle.textContent = `${channel.category} • ${channel.description || ''}`;

        overlaySources.innerHTML = '';

        channel.sources.forEach(source => {
            const sourceBtn = document.createElement('a');
            sourceBtn.className = 'source-btn';
            // If want to restrict external navigation until auth, ensure authPassed:
            sourceBtn.href = source.url;
            sourceBtn.target = '_blank';
            sourceBtn.tabIndex = 0;

            sourceBtn.innerHTML = `
                <div class="source-name">${source.name}</div>
                <div class="source-action">
                    <span>Play</span>
                    <i class="fas fa-play-circle"></i>
                </div>
            `;

            overlaySources.appendChild(sourceBtn);
        });

        overlay.style.display = 'flex';

        setTimeout(() => {
            const firstSourceBtn = document.querySelector('.source-btn');
            if (firstSourceBtn) firstSourceBtn.focus();
        }, 100);
    }

    document.getElementById('closeOverlayBtn').addEventListener('click', () => {
        const overlay = document.getElementById('overlay');
        overlay.style.display = 'none';
        if (currentFocusIndex >= 0 && currentFocusIndex < focusableElements.length) {
            focusableElements[currentFocusIndex].focus();
        }
    });

    /* ===============================
       Keyboard / focus helpers
       =============================== */
    function initKeyboardNavigation() {
        focusableElements = Array.from(document.querySelectorAll('.channel-item, .source-btn, .close-btn'));
        updateFocusIndicator();
    }

    function handleKeyNavigation(e) {
        // if auth overlay is visible, don't handle global navigation
        if (authOverlay.style.display === 'flex') return;

        const overlayEl = document.getElementById('overlay');
        if (overlayEl && overlayEl.style.display === 'flex') {
            handleOverlayNavigation(e);
            return;
        }

        switch(e.key) {
            case 'ArrowRight':
                e.preventDefault(); navigateFocus(1); break;
            case 'ArrowLeft':
                e.preventDefault(); navigateFocus(-1); break;
            case 'ArrowDown':
                e.preventDefault(); navigateFocus(getGridColumnCount()); break;
            case 'ArrowUp':
                e.preventDefault(); navigateFocus(-getGridColumnCount()); break;
            case 'Enter':
                e.preventDefault();
                if (currentFocusIndex >= 0 && focusableElements[currentFocusIndex]) {
                    focusableElements[currentFocusIndex].click();
                }
                break;
            case 'Escape':
                document.getElementById('overlay').style.display = 'none';
                break;
        }
    }

    function handleOverlayNavigation(e) {
        const overlayFocusable = Array.from(document.querySelectorAll('.source-btn, .close-btn'));
        const currentOverlayFocus = document.activeElement;
        let currentIndex = overlayFocusable.indexOf(currentOverlayFocus);

        switch(e.key) {
            case 'ArrowDown':
                e.preventDefault();
                currentIndex = (currentIndex + 1) % overlayFocusable.length;
                overlayFocusable[currentIndex].focus();
                break;
            case 'ArrowUp':
                e.preventDefault();
                currentIndex = (currentIndex - 1 + overlayFocusable.length) % overlayFocusable.length;
                overlayFocusable[currentIndex].focus();
                break;
            case 'Escape':
                e.preventDefault();
                document.getElementById('overlay').style.display = 'none';
                break;
        }
    }

    function navigateFocus(direction) {
        if (focusableElements.length === 0) return;
        currentFocusIndex = (currentFocusIndex + direction + focusableElements.length) % focusableElements.length;
        focusableElements[currentFocusIndex].focus();
        updateFocusIndicator();
    }

    function updateFocusIndicator() {
        if (currentFocusIndex >= 0 && currentFocusIndex < focusableElements.length) {
            const focusedElement = focusableElements[currentFocusIndex];
            const rect = focusedElement.getBoundingClientRect();
            focusIndicator.style.display = 'block';
            focusIndicator.style.width = `${rect.width + 8}px`;
            focusIndicator.style.height = `${rect.height + 8}px`;
            focusIndicator.style.top = `${rect.top + window.scrollY - 4}px`;
            focusIndicator.style.left = `${rect.left + window.scrollX - 4}px`;
        } else {
            focusIndicator.style.display = 'none';
        }
    }

    function getGridColumnCount() {
        const channelList = document.getElementById('channelList');
        const computedStyle = window.getComputedStyle(channelList);
        const cols = computedStyle.gridTemplateColumns.split(' ').length;
        return Math.max(1, parseInt(cols || 1));
    }

    /* ===============================
       On load: require auth before rendering channels
       =============================== */
    document.addEventListener('DOMContentLoaded', () => {
        const pwdExists = !!localStorage.getItem(AUTH_PWD_KEY);
        if (!pwdExists) {
            showAuthOverlayInitial();
        } else {
            // show login
            showAuthOverlayInitial();
        }
    });

    </script>
</body>
</html>
