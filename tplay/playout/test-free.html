<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STAR GOLD Live - Shaka Player</title>

  <!-- Shaka Player -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.8.5/shaka-player.compiled.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      background-color: #000;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
    }
    
    #video-container {
      width: 100vw;
      height: 100vh;
      position: relative;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    video {
      width: 100%;
      height: 100%;
      max-width: 1400px;
      object-fit: contain;
    }
    
    /* Custom Controls */
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }
    
    #video-container:hover .custom-controls {
      opacity: 1;
      pointer-events: all;
    }
    
    .progress-container {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      cursor: pointer;
      position: relative;
    }
    
    .progress-bar {
      height: 100%;
      background: #e50914;
      border-radius: 3px;
      width: 0%;
      position: relative;
    }
    
    .control-buttons {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }
    
    .left-controls, .right-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      cursor: pointer;
      font-size: 16px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      backdrop-filter: blur(5px);
    }
    
    .control-btn:hover {
      background: rgba(229, 9, 20, 0.7);
      transform: scale(1.1);
    }
    
    .volume-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .volume-slider {
      width: 80px;
      height: 4px;
      -webkit-appearance: none;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      outline: none;
    }
    
    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      background: #e50914;
      border-radius: 50%;
      cursor: pointer;
    }
    
    .time-display {
      font-size: 14px;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 10px;
      border-radius: 15px;
      font-variant-numeric: tabular-nums;
    }
    
    .channel-info {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 15px;
      border-radius: 20px;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .loading-spinner {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #e50914;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>

  <div id="video-container">
    <video id="video" poster="https://tstatic.akash-go.com/cms-ui/images/custom-content/1735554654688.png"></video>
    
    <div class="loading-spinner" id="loading-spinner"></div>
    
    <div class="channel-info">
      <strong>STAR GOLD Live</strong>
    </div>
    
    <div class="custom-controls">
      <div class="progress-container" id="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      
      <div class="control-buttons">
        <div class="left-controls">
          <button class="control-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
          <button class="control-btn" id="rewind-btn"><i class="fas fa-backward-step"></i></button>
          <button class="control-btn" id="forward-btn"><i class="fas fa-forward-step"></i></button>
          
          <div class="volume-container">
            <button class="control-btn" id="mute-btn"><i class="fas fa-volume-high"></i></button>
            <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.1" value="1">
          </div>
          
          <div class="time-display" id="time-display">00:00 / 00:00</div>
        </div>
        
        <div class="right-controls">
          <button class="control-btn" id="fullscreen-btn"><i class="fas fa-expand"></i></button>
        </div>
      </div>
    </div>
  </div>

  <script>
    async function initPlayer() {
      const video = document.getElementById('video');
      const player = new shaka.Player(video);

      // Show loading spinner
      document.getElementById('loading-spinner').style.display = 'block';

      // Error handling
      player.addEventListener('error', e => {
        console.error('Error code', e.detail.code, e);
        document.getElementById('loading-spinner').style.display = 'none';
      });

      try {
        // Configure DRM
        player.configure({
          drm: {
            servers: {
              'com.widevine.alpha': 'https://akashgo.yflix.top/license?id=ssuwd28er-ihda'
            }
          }
        });

        // Load DASH Stream
        await player.load('https://owrcovcrpy.gpcdn.net/bpk-tv/1729/output/index.mpd');
        console.log('The video has now been loaded!');
        
        // Hide loading spinner
        document.getElementById('loading-spinner').style.display = 'none';
        
        // Initialize custom controls
        initCustomControls(video);
        
      } catch (error) {
        console.error('Error loading stream', error);
        document.getElementById('loading-spinner').style.display = 'none';
      }
    }

    function initCustomControls(video) {
      const playPauseBtn = document.getElementById('play-pause-btn');
      const rewindBtn = document.getElementById('rewind-btn');
      const forwardBtn = document.getElementById('forward-btn');
      const muteBtn = document.getElementById('mute-btn');
      const volumeSlider = document.getElementById('volume-slider');
      const timeDisplay = document.getElementById('time-display');
      const progressContainer = document.getElementById('progress-container');
      const progressBar = document.getElementById('progress-bar');
      const fullscreenBtn = document.getElementById('fullscreen-btn');
      const videoContainer = document.getElementById('video-container');

      // Play/Pause functionality
      playPauseBtn.addEventListener('click', () => {
        if (video.paused) {
          video.play();
          playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
          video.pause();
          playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
      });

      // Rewind 10 seconds
      rewindBtn.addEventListener('click', () => {
        video.currentTime = Math.max(0, video.currentTime - 10);
      });

      // Forward 10 seconds
      forwardBtn.addEventListener('click', () => {
        video.currentTime = Math.min(video.duration, video.currentTime + 10);
      });

      // Mute functionality
      muteBtn.addEventListener('click', () => {
        video.muted = !video.muted;
        muteBtn.innerHTML = video.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-high"></i>';
      });

      // Volume slider
      volumeSlider.addEventListener('input', () => {
        video.volume = volumeSlider.value;
        if (video.volume == 0) {
          muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
        } else {
          muteBtn.innerHTML = '<i class="fas fa-volume-high"></i>';
        }
      });

      // Update time display and progress bar
      video.addEventListener('timeupdate', () => {
        const currentTime = formatTime(video.currentTime);
        const duration = formatTime(video.duration);
        timeDisplay.textContent = `${currentTime} / ${duration}`;
        
        const progressPercent = (video.currentTime / video.duration) * 100;
        progressBar.style.width = `${progressPercent}%`;
      });

      // Seek functionality
      progressContainer.addEventListener('click', (e) => {
        const rect = progressContainer.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        video.currentTime = percent * video.duration;
      });

      // Fullscreen functionality
      fullscreenBtn.addEventListener('click', () => {
        if (!document.fullscreenElement) {
          videoContainer.requestFullscreen().catch(err => {
            console.error('Error attempting to enable fullscreen:', err);
          });
          fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
        } else {
          document.exitFullscreen();
          fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
        }
      });

      // Format time helper function
      function formatTime(seconds) {
        if (isNaN(seconds)) return "00:00";
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      }

      // Update play/pause button based on video state
      video.addEventListener('play', () => {
        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
      });
      
      video.addEventListener('pause', () => {
        playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
      });

      // Set initial volume
      video.volume = volumeSlider.value;
    }

    document.addEventListener('DOMContentLoaded', initPlayer);
  </script>
</body>
</html>
